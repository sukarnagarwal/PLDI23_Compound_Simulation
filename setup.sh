# Script file Framed by Sukarn Agarwal (sagarwa2@ed.ac.uk)
#!/bin/bash


#######################################################################################################
#			Building GEM-5
#######################################################################################################
echo "========================================================="
echo "Building Gem-5 with Original Files"
echo "========================================================="
sudo docker run --rm -v $PWD/gem5:/gem5 -w /gem5 gcn-gpu2 scons -sQ -j4 build/GCN3_X86/gem5.opt
cd gem5
tar -xvzf src_CTA_GPU.tar.gz
tar -xvzf src_CTA_Hetero.tar.gz
tar -xvzf src_SWMR_voilation.tar.gz
cd ../



#######################################################################################################
#			Building CPU Only Litmus Test
#######################################################################################################
echo "========================================================="
echo "Building CPU only Litmus Test"
echo "========================================================="
cd gem5-resources/gpu/CPU_Litmus_test
./buildall.sh
cd ../../../


#######################################################################################################
#			Building GPU Only Litmus Test
#######################################################################################################
echo "========================================================="
echo "Building GPU only Litmus Test"
echo "========================================================="
cd gem5-resources/gpu/GPU_Litmus_test 
./buildall.sh
cd ../../../

#######################################################################################################
#			Building Heterogeneous Litmus Test with SWMR
#######################################################################################################
echo "========================================================="
echo "Building Compound Litmus Test"
echo "========================================================="
cd gem5-resources/gpu/Heterogenous_Litmus_Test
./buildall_hetero.sh
cd ../../../

#######################################################################################################
#			Building Heterogeneous Litmus Test with No SWMR
#######################################################################################################
echo "========================================================="
echo "Building Compound Litmus Test with No SWMR"
echo "========================================================="
cd gem5-resources/gpu/Heterogenous_Litmus_Test/SWMR_Voilation
./buildall_SWMR_voilation.sh
cd ../../../../




